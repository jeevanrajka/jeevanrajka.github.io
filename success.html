<html>
    <head>
		<link rel="stylesheet" type="text/css" href="style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.27/angular.min.js"></script>

    </head>
    <body>
        <div ng-app="myApp" ng-controller="myCtrl"> 
		<div data-role="page">   
			
				<h1 class="commonCenter commonCenterColor"> Log in successful</h1>				
				<table>
				  <tr>
					<th><h3 > Access token: </h3></th>
					<td><h3 id="access"></h3></td>
				  </tr>
				  <tr>
					<th><h3 > Refresh token: </h3></th>
					<td><h3 id="refresh"></h3></td>
				  </tr>
				  <tr>
					<th><h3 > Token type: </h3></th>
					<td><h3 id="tokenType"></h3></td>
				  </tr>
				  <tr>
					<th><h3 > instance URL: </h3></th>
					<td><h3 id="instanceUrl"></h3></td>
				  </tr>
				  <tr>
					<th><h3 > ID: </h3></th>
					<td><h3 id="id"></h3></td>
				  </tr>
				  <tr>
					<th><h3 > Issued at: </h3></th>
					<td><h3 id="issued_at"></h3></td>
				  </tr>
				  <tr>
					<th><h3 > Signature: </h3></th>
					<td><h3 id="signature"></h3></td>
				  </tr>
				</table>
				
			</div> 
			        <script>
            var app = angular.module('myApp', []);
            app.controller('myCtrl', function ($scope, $http) {
                $scope.callbackResponse = (document.URL).split("=")[1];
                $scope.callbackResponse = $scope.callbackResponse.split("%")[0];
                $scope.callbackResponse = $scope.callbackResponse + "==";             
               // console.log($scope.callbackResponse);
               
                /*  $http({
                            method : "POST",
                            url : postURL
                        }).then(function mySucces(response) {
                           // $scope.myWelcome = response.data;
                            localStorage.setItem("access",JSON.stringify(response.data));
                            window.location.href = "https://jeevanrajka.github.io/success1.html";
                        }, function myError(response) {
                            $scope.myWelcome = response.statusText;
                            alert("error");
                            console.log(response.data.id);
                        });*/
          /*      $http({
                    method: 'POST',
                    url: "https://login.salesforce.com/services/oauth2/token",
                        header : {"accept" : "application/json",
                                    "accept-encoding" : "gzip, deflate",
                                    "accept-language": "en-US,en;q=0.8",
									"Access-Control-Allow-Origin": "http://localhost:3000",
"content-type": "text/plain",
"user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36"},        
                        params: {
                        grant_type: "authorization_code",
                        code: $scope.callbackResponse,
                        client_id: "3MVG9d8..z.hDcPLctYKc1LCdYB6BXQZYQOI.0qrBMzu.m.A2i9Ov6jrB2MNLWt7fHcp43vGzlWZhiEUM0RFu",
                        client_secret: "9090652624565001015",
                        redirect_uri: "http://localhost:3000/success.html"
                    }
                   
                }).success(function(data, status, headers, config) {
                     //Data received from webservices
                       console.log("Success Response Received");
//var responseObj;
                // responseObj = data.addDeliveryVehicleResponse;
                             
                     }).error(function(data, status, headers, config) {
                       
                    

console.log("inside error function");

                      }); */
					  $http({
					  method: 'POST',
					  url: "https://login.salesforce.com/services/oauth2/token?grant_type=authorization_code&client_id=3MVG9d8..z.hDcPLctYKc1LCdYB6BXQZYQOI.0qrBMzu.m.A2i9Ov6jrB2MNLWt7fHcp43vGzlWZhiEUM0RFu&redirect_uri=https://jeevanrajka.github.io/success.html&code="+$scope.callbackResponse+"&client_secret=9090652624565001015"})
					  .success(function(data, status, headers, config) {
                       console.log("Success Response Received",data.access_token);
						var access_token = data.access_token;
						var refresh_token = data.refresh_token;
						var signature = data.signature;
						var id_token = data.id_token;
						var instance_url = data.instance_url;
						var id = data.id;
						var token_type = data.token_type;
						var issued_at = data.issued_at;
						document.getElementById("access").innerHTML = access_token;
						document.getElementById("refresh").innerHTML = refresh_token;
						document.getElementById("tokenType").innerHTML =  token_type;
						document.getElementById("issued_at").innerHTML =  issued_at;
						document.getElementById("signature").innerHTML =  signature;
						document.getElementById("id").innerHTML =  id;
						document.getElementById("instanceUrl").innerHTML =  instance_url;
                     })
					 .error(function(data, status, headers, config) {
                        console.log("inside error function");
                      });
					  
					  
                
      
           });
        </script>
            
        </div>        
    </body>
</html>
